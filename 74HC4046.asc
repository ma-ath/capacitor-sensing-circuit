Version 4
SHEET 1 3580 1976
WIRE 3248 48 2176 48
WIRE 3184 176 3152 176
WIRE 2464 208 2448 208
WIRE 2672 208 2656 208
WIRE 2672 240 2656 240
WIRE 2768 240 2752 240
WIRE 2464 304 2448 304
WIRE 2656 304 2656 240
WIRE 2384 464 2320 464
WIRE 2496 464 2464 464
WIRE 2656 464 2624 464
WIRE 2928 464 2864 464
WIRE 3056 464 3008 464
WIRE 3120 464 3056 464
WIRE 2640 496 2560 496
WIRE 3056 496 3056 464
WIRE 2864 528 2816 528
WIRE 2976 528 2944 528
WIRE 2640 592 2640 496
WIRE 2640 592 2352 592
WIRE 2352 608 2352 592
WIRE 2864 624 2816 624
WIRE 2976 624 2944 624
WIRE 3040 624 2976 624
WIRE 2976 656 2976 624
WIRE 2352 704 2352 688
WIRE 2400 752 2368 752
WIRE 2432 752 2400 752
WIRE 2816 752 2720 752
WIRE 2656 784 2656 464
WIRE 2656 784 2576 784
WIRE 2720 784 2720 752
WIRE 2368 816 2368 752
WIRE 2720 896 2720 864
WIRE 2368 912 2368 896
WIRE 2176 944 2176 48
WIRE 3248 944 3248 48
WIRE 3248 944 2176 944
FLAG 2448 208 SIG1
FLAG 2448 304 COMP1
FLAG 2976 240 PC1
IOPIN 2976 240 Out
FLAG 2400 752 nf
FLAG 2368 912 0
FLAG 2816 528 VCOin
IOPIN 2816 528 In
FLAG 2320 464 VCOout
IOPIN 2320 464 Out
FLAG 2352 704 0
FLAG 2976 528 0
FLAG 2720 896 0
FLAG 2816 752 VCCH
FLAG 3056 576 0
FLAG 2864 464 SIG
IOPIN 2864 464 In
FLAG 3120 464 SIG1
FLAG 2976 736 0
FLAG 2816 624 COMP
IOPIN 2816 624 In
FLAG 3040 624 COMP1
FLAG 3152 176 VCC
IOPIN 3152 176 In
SYMBOL Digital\\buf1 2464 144 R0
WINDOW 3 21 90 Left 0
SYMATTR Value ref={vcc1/2}
SYMATTR InstName A6
SYMBOL Digital\\buf1 2464 240 R0
WINDOW 3 19 87 Left 0
SYMATTR Value ref={vcc1/2}
SYMATTR InstName A7
SYMBOL Digital\\inv 2592 144 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A8
SYMBOL Digital\\buf1 2832 176 R0
WINDOW 3 -47 95 Invisible 0
WINDOW 39 -74 110 Left 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR SpiceLine vhigh={vcc1}
SYMATTR InstName A9
SYMATTR Value2 ref=0.5
SYMBOL Digital\\inv 2592 240 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A10
SYMBOL Digital\\inv 2768 176 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A15
SYMBOL Digital\\inv 2528 144 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A16
SYMBOL Digital\\inv 2528 240 R0
WINDOW 3 -52 103 Invisible 0
SYMATTR Value td={0.5*tdel1} tripdt={tripdt1}
SYMATTR InstName A17
SYMBOL SpecialFunctions\\modulate 2432 752 R0
WINDOW 3 -98 114 Left 0
SYMATTR Value mark={fmax} space={fmin}
SYMATTR InstName A20
SYMBOL Digital\\buf1 2624 400 M0
WINDOW 3 -24 -6 Left 0
SYMATTR Value ref=0 Vhigh={vcc1} vlow=0
SYMATTR InstName A24
SYMATTR Value2 td={tdel1} tripdt={tripdt1}
SYMBOL Digital\\xor 2720 160 R0
WINDOW 3 16 52 Invisible 0
SYMATTR Value td={tdel1} tripdt={tripdt1}
SYMATTR InstName A25
SYMBOL bv 2368 800 R0
WINDOW 3 31 120 Left 0
SYMATTR Value V=Table(V(VCOin), 0,0, 0.9, 0, {vcc1-0.9}, 1)
SYMATTR InstName B6
SYMBOL res 2848 544 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value 1G
SYMBOL res 2368 480 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL Digital\\or 2528 416 M0
WINDOW 3 -94 126 Left 0
SYMATTR Value ref={vcc1/2} Vhigh={vcc1} vlow=0
SYMATTR InstName A26
SYMBOL res 2336 592 R0
SYMATTR InstName R14
SYMATTR Value 1G
SYMBOL bv 3056 480 R0
WINDOW 3 -239 -54 Left 0
SYMATTR Value V=V(vcch,0)*(1-tanh(v(sig,vcch)))
SYMATTR InstName B7
SYMBOL bv 2720 768 R0
SYMATTR InstName B8
SYMATTR Value V=0.5*V(vcc,0)
SYMBOL res 2912 480 R270
WINDOW 0 15 -8 VTop 0
WINDOW 3 44 120 VBottom 0
SYMATTR InstName R16
SYMATTR Value 1e6
SYMBOL bv 2976 640 R0
WINDOW 3 -260 -53 Left 0
SYMATTR Value V=V(vcch,0)*(1-tanh(v(comp,vcch)))
SYMATTR InstName B9
SYMBOL res 2848 640 R270
WINDOW 0 16 0 VTop 0
WINDOW 3 43 126 VBottom 0
SYMATTR InstName R18
SYMATTR Value 1e6
SYMBOL res 2880 256 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 0 56 VBottom 0
SYMATTR InstName R19
SYMATTR Value 100
TEXT 2824 808 Left 0 ;VCC/2
TEXT 2984 776 Left 0 ;Buffered VCOin
TEXT 2200 88 Left 2 !.param VCC1=5 FMIN=3.25e6 FMAX=4.75e6 SPEED=1.0 TDEL1=5n TRIPDT1=2n
TEXT 2368 960 Left 2 ;VCO Model and Comparator\nModified 74HC4046 for simulation (doesn't include all ports)
TEXT 3264 880 Left 0 ;FMAX = max. VCO frequency\nFMIN = min. VCO frequency\nTDEL1=5n  internal gate delay; don't change it\nTRIPDT1=3n  change it to 2n for Fvco>=1e6, 2n*1e6/Fvco_max\nExample: Fvco_max=1kHz -> TRIPDT=2u
TEXT 3264 840 Left 0 ;C1 = 10 pF ?\nR1 = 10k ?
