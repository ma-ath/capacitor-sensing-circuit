Version 4
SHEET 1 1628 792
WIRE 256 -464 -272 -464
WIRE -48 -336 -48 -368
WIRE -96 -224 -144 -224
WIRE -48 -224 -48 -256
WIRE -48 -224 -96 -224
WIRE -144 -176 -144 -224
WIRE -48 -176 -48 -224
WIRE -144 -48 -144 -96
WIRE -48 -48 -48 -96
WIRE 256 0 256 -464
WIRE 256 0 96 0
WIRE 64 96 0 96
WIRE 128 96 64 96
WIRE 240 96 128 96
WIRE 320 96 240 96
WIRE 496 96 400 96
WIRE 816 96 576 96
WIRE 960 96 816 96
WIRE 960 144 960 96
WIRE 816 176 816 96
WIRE -160 192 -160 96
WIRE 0 192 0 96
WIRE 240 192 240 96
WIRE 496 192 496 96
WIRE 576 192 576 96
WIRE 960 192 960 144
WIRE 128 208 128 96
WIRE 816 288 816 240
WIRE 960 304 960 272
WIRE -160 368 -160 272
WIRE 0 368 0 272
WIRE 128 368 128 272
WIRE 128 368 0 368
WIRE 240 368 240 272
WIRE 240 368 128 368
WIRE 320 368 240 368
WIRE 496 368 496 272
WIRE 496 368 400 368
WIRE 576 368 576 272
WIRE 576 368 496 368
WIRE 704 368 576 368
WIRE 816 368 816 352
WIRE 816 368 704 368
WIRE 960 368 960 304
WIRE 960 368 816 368
WIRE 704 384 704 368
WIRE 128 464 128 368
WIRE 272 464 128 464
WIRE 496 464 496 368
WIRE 496 464 352 464
WIRE 96 560 96 0
WIRE 96 560 -272 560
WIRE 416 576 224 576
FLAG -160 96 C+
IOPIN -160 96 BiDir
FLAG -160 368 C-
IOPIN -160 368 BiDir
FLAG 224 576 K
IOPIN 224 576 In
FLAG 704 384 0
FLAG 960 144 +
FLAG 960 304 -
FLAG -96 -224 x
FLAG 64 96 a
FLAG -144 -48 0
FLAG -48 -48 0
FLAG -48 -368 0
SYMBOL cap 800 176 R0
WINDOW 0 28 8 Left 2
SYMATTR InstName C
SYMATTR Value 1
SYMBOL bv 496 176 M0
WINDOW 0 34 34 Left 2
WINDOW 3 -50 99 Left 2
SYMATTR InstName Vb
SYMATTR Value V=V(+)-V(-)
SYMBOL bi 576 272 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName Ib
SYMATTR Value I=(1/V(K))*I(Vb)
SYMBOL res 416 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 34 55 VTop 2
SYMATTR InstName Rs
SYMATTR Value {Rs}
SYMBOL ind 304 384 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Ls
SYMATTR Value {Ls}
SYMBOL res 224 176 R0
SYMATTR InstName Rpar
SYMATTR Value {Rpar}
SYMBOL cap 112 208 R0
SYMATTR InstName Cpar
SYMATTR Value {Cpar}
SYMBOL res 368 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RLshunt
SYMATTR Value {RLshunt}
SYMBOL Misc\\cell 816 288 R0
SYMATTR InstName Vi
SYMATTR Value {Vi}
SYMBOL res 944 176 R0
SYMATTR InstName Rcon
SYMATTR Value 1000G
SYMBOL bi 0 192 M0
SYMATTR InstName V
SYMATTR Value I=V(x)
SYMBOL bi -48 -176 M0
WINDOW 0 -60 -1 Left 2
WINDOW 3 131 76 Left 2
SYMATTR InstName V1
SYMATTR Value I=V(a)
SYMBOL bi -144 -96 M180
WINDOW 0 -62 80 Left 2
WINDOW 3 165 -15 Left 2
SYMATTR InstName V2
SYMATTR Value I=V(C+)-V(C-)
SYMBOL res -64 -352 R0
SYMATTR InstName Rcon2
SYMATTR Value 1000G
SYMBOL bi -160 192 M0
WINDOW 0 -60 -1 Left 2
WINDOW 3 15 90 Left 2
SYMATTR InstName V3
SYMATTR Value I=I(Vb)
TEXT -320 232 Left 2 ;C=V(K)
TEXT 584 448 Left 2 !.param Rs 1u\n.param Ls 0\n.param Rpar 1G\n.param Cpar 0\n.param RLshunt 1G\n.param Vi 0
TEXT -56 720 Left 2 ;modeled by matheus lima, don't garantee anything use at your own risk\ndidn't test everything, needs more testings\nbased on prof. moreirão design and some resources online
TEXT -336 -448 Left 2 ;this section isolates simulation from rest of circuit\nallows simulation non-referenced to ground
TEXT 408 80 Left 2 ;this is an ideal transformer
TEXT 816 400 Left 2 ;I set the default value of C to 1 Faraday and had no problem with it\nif you think this may cause some kind of numerical error, change it by\nwherever value it suits your project. Capacitance will always be value\nof C times voltage in K
TEXT 416 -176 Left 2 ;Rcon are here so the simulator doesn't complain
